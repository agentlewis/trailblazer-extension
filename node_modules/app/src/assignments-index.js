/** @jsx React.DOM */

var React 			= require('react');
var AssignmentItem	= require('app/components/assignment-item');

var _ = require('lodash');

/**
 * The Assignments Index view.
 *
 * Renders a list of <AssignmentItem> elements
 */
module.exports = React.createClass({

  render: function () {
    //convert immutable deep object to normal js object
    var assignmentState = this.props.state.get('assignmentState').toJS();
    var assignmentsIndex = assignmentState.assignmentsIndex;

    var data = Object.keys(assignmentsIndex).map(function (key) { return assignmentsIndex[key] });
    var assignments = data.map(function (assignment) {
      return <AssignmentItem item={assignment} key={assignment.id} actions={this.props.actions}/>
    }.bind(this));

    //NOTE the transform in gulp-jsx may still not have updated to React 0.12
    //was using npm run components (react-tools) to do it properly
    //should transform to React.createElement("ul", null, assignments);
    return <ul>{assignments}</ul>;
  },


  shouldComponentUpdate: function (nextProps) {
    //NOTE use this method to test if state has mutated
    // if (nextProps.state.get('assignmentState') === this.props.state.get('assignmentState') {
    //   return false;
    // } else {
    //   return true;
    // }

    return true;
  }



});



      // nodeState: Map
        // loading: Boolean
        // error: String
        // nodeIndex: Map
      // assignmentState: Map
      //   loading: Boolean
      //   error: String
      //   assignmentsIndex: Map
      //   currentAssignment: Integer



